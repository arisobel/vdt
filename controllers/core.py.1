# -*- coding: utf-8 -*-
# tente algo como
def trata_pres():


    id_pessoa = request.args(0)
    data = str(request.args(1))
    hora = str(request.args(2))
    aula = int(request.args(3))
    id_pres = request.args(4) or None
    
    
    if data:
        data = "-".join([for i in request.args(1).split("-")].reverse())

    if hora:
        hora = hora.replace("_",":").replace("_",":")


    erro = "-"



    if  int(id_pres or "0")>0:
        ret = db(db.presenca.id==id_pres).validate_and_update(pessoa=id_pessoa,horario=hora,dia=data,aula=aula)

    else:
        #ret = db.presenca.validate_and_insert(pessoa=id_pessoa,horario=hora,dia=data,aula=aula)
        ret = db.presenca.validate_and_insert(pessoa=3,horario="20:00:00",dia="2021-11-12",aula=2)
        db.commit()
        id_pres=ret.id


    try:
        erro = ret.erros
    except:
        erro = "nada"


    #return response.json(dict(erro=erro ,id_pres=id_pres, pessoa=id_pessoa,horario=hora,dia=data,aula=aula))
    return response.json(ret)


def x():
    ret = db.presenca.validate_and_insert(pessoa=3,horario="20:00:00",dia="12-11-2021",aula=2)

    return response.json(ret)
